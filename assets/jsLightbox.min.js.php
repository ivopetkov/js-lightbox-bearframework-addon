<?php

/*
 * JS lightbox for Bear Framework
 * https://github.com/ivopetkov/js-lightbox-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.jsLightbox=ivoPetkov.bearFrameworkAddons.jsLightbox||function(){var t=null,e=null,n=null,i=null,o=0,l=!1,s=null,r=function(){if(null!==s)return s;var t=document.body,e=document.createElement("p");e.style.width="100%",e.style.height="200px";var n=document.createElement("div");n.style.position="absolute",n.style.top="-10000px",n.style.left="-10000px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(e),t.appendChild(n);var i=e.offsetWidth;n.style.overflow="scroll";var o=e.offsetWidth;return i===o&&(o=n.clientWidth),t.removeChild(n),s=i-o},c=function(s,c){window.clearTimeout(e),void 0===c&&(c={});var a=void 0!==c.spacing?c.spacing:"15px",h=void 0===c.showCloseButton||c.showCloseButton,v=void 0!==c.onOpen?c.onOpen:null;if(null===t){var p=document.body;(t=document.createElement("div")).setAttribute("class","ipjslghtbc"),t.setAttribute("data-lightbox-component","container"),t.innerHTML="<div><div><div></div></div></div>",t.innerHTML+='<a class="ipjslghtbx" role="button" tabindex="0" data-lightbox-component="close-button" aria-label="Close this window" title="Close this window"></a>',t.lastChild.addEventListener("click",u),p.appendChild(t),p.addEventListener("keydown",d),n=window.setTimeout((function(){t.setAttribute("class","ipjslghtbc ipjslghtbcv"),n=null,function(){if(!l){var t=document.body;t.style.overflow="hidden",t.scrollHeight>window.innerHeight&&(t.style.marginRight=r()+"px"),l=!0}}()}),16)}else t.setAttribute("class","ipjslghtbc ipjslghtbcv");t.lastChild.style.display=h?"block":"none";var b=t.firstChild.firstChild.firstChild;return b.setAttribute("data-lightbox-component","content"),new Promise((function(t,e){if('<span class="ipjslghtbcl"></span>'===s)null===b.querySelector(".ipjslghtbcl")&&(b.style.padding=a,b.innerHTML=s,i=window.setTimeout((function(){var t=document.querySelector(".ipjslghtbcl");null!==t&&t.setAttribute("class","ipjslghtbcl ipjslghtbclv")}),1e3));else{var n=function(){var n;n=o,clientPackages.get("html5DOMDocument").then((function(l){n===o?(window.clearTimeout(i),b.style.padding=a,l.insert(s,[b]),null!==v&&v(b),t()):e()})).catch((function(){e()}))},l=b.querySelector(".ipjslghtbcl");null===l?n():(l.setAttribute("class","ipjslghtbcl"),window.setTimeout(n,300))}}))},u=function(){window.clearTimeout(n),window.clearTimeout(i),null!==t&&(t.setAttribute("class","ipjslghtbc"),e=window.setTimeout((function(){try{document.body.removeEventListener("keydown",d)}catch(t){}t.parentNode.removeChild(t),t=null,function(){if(l){var t=document.body;t.style.overflow="auto",t.style.marginRight="auto",l=!1}}()}),300))},d=function(t){27===t.keyCode&&u()};return Promise=window.Promise||function(t){var e=[],n=null;this.then=function(t){return e.push(t),this},this.catch=function(t){return null===n&&(n=t),this};var i=function(){for(var t in e)e[t].apply(null,arguments)},o=function(){null!==n&&n.apply(null,arguments)};window.setTimeout((function(){t(i,o)}),16)},{make:function(t){return o++,c('<span class="ipjslghtbcl"></span>',t),e=o,{open:function(t,n){return e===o?c(t,n):new Promise((function(t,e){e()}))},close:function(){e===o&&u()}};var e},close:u}}();
EOT;
