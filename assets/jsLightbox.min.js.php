<?php

/*
 * JS lightbox for Bear Framework
 * https://github.com/ivopetkov/js-lightbox-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{};
ivoPetkov.bearFrameworkAddons.jsLightbox=ivoPetkov.bearFrameworkAddons.jsLightbox||function(){var a=null,l=null,g=null,h=null,d=0,n=function(e,b){d++;window.clearTimeout(l);"undefined"===typeof b&&(b={});var c="undefined"!==typeof b.spacing?b.spacing:"15px";null===a?(a=document.createElement("div"),a.setAttribute("class","ipjslghtbc"),a.innerHTML='<div><div></div></div><a class="ipjslghtbx"><span>&#10010;</span></a>',a.lastChild.addEventListener("click",f),document.body.appendChild(a),document.body.addEventListener("keydown",
m),g=window.setTimeout(function(){a.setAttribute("class","ipjslghtbc ipjslghtbcv");g=null},16)):a.setAttribute("class","ipjslghtbc ipjslghtbcv");a.firstChild.firstChild.style.padding=c;return new Promise(function(b,c){var k=a.firstChild.firstChild;'<span class="ipjslghtbcl">&#8228;</span>'===e?0!==k.innerHTML.indexOf('<span class="ipjslghtbcl')&&(k.innerHTML=e,h=window.setTimeout(function(){var a=document.querySelector(".ipjslghtbcl");null!==a&&a.setAttribute("class","ipjslghtbcl ipjslghtbclv")},
1E3)):function(a){clientPackages.get("-ivopetkov-js-lightbox-html5domdocument").then(function(f){a===d?(window.clearTimeout(h),f.insert(e,[k]),b()):c()})["catch"](function(){c()})}(d)})},f=function(){d++;window.clearTimeout(g);window.clearTimeout(h);null!==a&&(a.setAttribute("class","ipjslghtbc"),l=window.setTimeout(function(){try{document.body.removeEventListener("keydown",m)}catch(e){}a.parentNode.removeChild(a);a=null},300))},m=function(a){27===a.keyCode&&f()};Promise=window.Promise||function(a){var b=
[],c=null;this.then=function(a){b.push(a);return this};this["catch"]=function(a){null===c&&(c=a);return this};var d=function(){for(var a in b)b[a].apply(null,arguments)},e=function(){null!==c&&c.apply(null,arguments)};window.setTimeout(function(){a(d,e)},16)};return{make:function(a){n('<span class="ipjslghtbcl">&#8228;</span>',a);return function(a){return{open:function(c,b){return a===d?n(c,b):new Promise(function(a,b){b()})},close:function(){a===d&&f()}}}(d)},close:f}}();
EOT;
