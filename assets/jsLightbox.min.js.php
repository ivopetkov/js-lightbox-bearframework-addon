<?php

/*
 * JS lightbox for Bear Framework
 * https://github.com/ivopetkov/js-lightbox-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.jsLightbox=ivoPetkov.bearFrameworkAddons.jsLightbox||function(){var t=null,e=null,n=null,i=null,l=0,o=!1,s=null,r=function(){if(null!==s)return s;var t=document.body,e=document.createElement("p");e.style.width="100%",e.style.height="200px";var n=document.createElement("div");n.style.position="absolute",n.style.top="-10000px",n.style.left="-10000px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(e),t.appendChild(n);var i=e.offsetWidth;n.style.overflow="scroll";var l=e.offsetWidth;return i===l&&(l=n.clientWidth),t.removeChild(n),s=i-l},u=function(s,u){window.clearTimeout(e),void 0===u&&(u={});var a=void 0!==u.spacing?u.spacing:"15px",h=void 0===u.showCloseButton||u.showCloseButton,v=void 0!==u.onOpen?u.onOpen:null;if(null===t){var p=document.body;(t=document.createElement("div")).setAttribute("class","ipjslghtbc"),t.innerHTML="<div><div><div></div></div></div>",t.innerHTML+='<a class="ipjslghtbx" role="button" tabindex="0" aria-label="Close this window" title="Close this window"></a>',t.lastChild.addEventListener("click",c),p.appendChild(t),p.addEventListener("keydown",d),n=window.setTimeout((function(){t.setAttribute("class","ipjslghtbc ipjslghtbcv"),n=null,function(){if(!o){var t=document.body;t.style.overflow="hidden",t.scrollHeight>window.innerHeight&&(t.style.marginRight=r()+"px"),o=!0}}()}),16)}else t.setAttribute("class","ipjslghtbc ipjslghtbcv");t.lastChild.style.display=h?"block":"none";var f=t.firstChild.firstChild.firstChild;return new Promise((function(t,e){if('<span class="ipjslghtbcl"></span>'===s)null===f.querySelector(".ipjslghtbcl")&&(f.style.padding=a,f.innerHTML=s,i=window.setTimeout((function(){var t=document.querySelector(".ipjslghtbcl");null!==t&&t.setAttribute("class","ipjslghtbcl ipjslghtbclv")}),1e3));else{var n=function(){var n;n=l,clientPackages.get("html5DOMDocument").then((function(o){n===l?(window.clearTimeout(i),f.style.padding=a,o.insert(s,[f]),null!==v&&v(f),t()):e()})).catch((function(){e()}))},o=f.querySelector(".ipjslghtbcl");null===o?n():(o.setAttribute("class","ipjslghtbcl"),window.setTimeout(n,300))}}))},c=function(){window.clearTimeout(n),window.clearTimeout(i),null!==t&&(t.setAttribute("class","ipjslghtbc"),e=window.setTimeout((function(){try{document.body.removeEventListener("keydown",d)}catch(t){}t.parentNode.removeChild(t),t=null,function(){if(o){var t=document.body;t.style.overflow="auto",t.style.marginRight="auto",o=!1}}()}),300))},d=function(t){27===t.keyCode&&c()};return Promise=window.Promise||function(t){var e=[],n=null;this.then=function(t){return e.push(t),this},this.catch=function(t){return null===n&&(n=t),this};var i=function(){for(var t in e)e[t].apply(null,arguments)},l=function(){null!==n&&n.apply(null,arguments)};window.setTimeout((function(){t(i,l)}),16)},{make:function(t){return l++,u('<span class="ipjslghtbcl"></span>',t),e=l,{open:function(t,n){return e===l?u(t,n):new Promise((function(t,e){e()}))},close:function(){e===l&&c()}};var e},close:c}}();
EOT;
