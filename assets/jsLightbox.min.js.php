<?php

/*
 * JS lightbox for Bear Framework
 * https://github.com/ivopetkov/js-lightbox-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.jsLightbox=ivoPetkov.bearFrameworkAddons.jsLightbox||function(){var t=null,e=null,n=null,i=null,o=0,l=!1,s=null,d=function(){if(null!==s)return s;var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="-10000px",e.style.left="-10000px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;return n===i&&(i=e.clientWidth),document.body.removeChild(e),s=n-i},r=function(s,r){window.clearTimeout(e),void 0===r&&(r={});var a=void 0!==r.spacing?r.spacing:"15px",h=void 0===r.showCloseButton||r.showCloseButton;null===t?((t=document.createElement("div")).setAttribute("class","ipjslghtbc"),t.innerHTML="<div><div><div></div></div></div>",t.innerHTML+='<a class="ipjslghtbx" role="button" tabindex="0" aria-label="Close this window" title="Close this window"></a>',t.lastChild.addEventListener("click",c),document.body.appendChild(t),document.body.addEventListener("keydown",u),n=window.setTimeout((function(){t.setAttribute("class","ipjslghtbc ipjslghtbcv"),n=null,l||(document.body.style.overflow="hidden",document.body.scrollHeight>window.innerHeight&&(document.body.style.marginRight=d()+"px"),l=!0)}),16)):t.setAttribute("class","ipjslghtbc ipjslghtbcv"),t.lastChild.style.display=h?"block":"none";var v=t.firstChild.firstChild.firstChild;return new Promise((function(t,e){if('<span class="ipjslghtbcl"></span>'===s)null===v.querySelector(".ipjslghtbcl")&&(v.style.padding=a,v.innerHTML=s,i=window.setTimeout((function(){var t=document.querySelector(".ipjslghtbcl");null!==t&&t.setAttribute("class","ipjslghtbcl ipjslghtbclv")}),1e3));else{var n=function(){var n;n=o,clientPackages.get("-ivopetkov-js-lightbox-html5domdocument").then((function(l){n===o?(window.clearTimeout(i),v.style.padding=a,l.insert(s,[v]),t()):e()})).catch((function(){e()}))},l=v.querySelector(".ipjslghtbcl");null===l?n():(l.setAttribute("class","ipjslghtbcl"),window.setTimeout(n,300))}}))},c=function(){window.clearTimeout(n),window.clearTimeout(i),null!==t&&(t.setAttribute("class","ipjslghtbc"),e=window.setTimeout((function(){try{document.body.removeEventListener("keydown",u)}catch(t){}t.parentNode.removeChild(t),t=null,l&&(document.body.style.overflow="auto",document.body.style.marginRight="auto",l=!1)}),300))},u=function(t){27===t.keyCode&&c()};return Promise=window.Promise||function(t){var e=[],n=null;this.then=function(t){return e.push(t),this},this.catch=function(t){return null===n&&(n=t),this};var i=function(){for(var t in e)e[t].apply(null,arguments)},o=function(){null!==n&&n.apply(null,arguments)};window.setTimeout((function(){t(i,o)}),16)},{make:function(t){return o++,r('<span class="ipjslghtbcl"></span>',t),e=o,{open:function(t,n){return e===o?r(t,n):new Promise((function(t,e){e()}))},close:function(){e===o&&c()}};var e},close:c}}();
EOT;
